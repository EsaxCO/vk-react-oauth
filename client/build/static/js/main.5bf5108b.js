!function(e){function t(t){for(var s,o,c=t[0],l=t[1],i=t[2],j=0,p=[];j<c.length;j++)o=c[j],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);for(u&&u(t);p.length;)p.shift()();return r.push.apply(r,i||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],s=!0,c=1;c<a.length;c++){var l=a[c];0!==n[l]&&(s=!1)}s&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var s={},n={0:0},r=[];function o(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=s,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(a,s,function(t){return e[t]}.bind(null,s));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var i=0;i<c.length;i++)t(c[i]);var u=l;r.push([208,1]),a()}({203:function(e,t,a){var s={"./af":37,"./af.js":37,"./ar":38,"./ar-dz":39,"./ar-dz.js":39,"./ar-kw":40,"./ar-kw.js":40,"./ar-ly":41,"./ar-ly.js":41,"./ar-ma":42,"./ar-ma.js":42,"./ar-sa":43,"./ar-sa.js":43,"./ar-tn":44,"./ar-tn.js":44,"./ar.js":38,"./az":45,"./az.js":45,"./be":46,"./be.js":46,"./bg":47,"./bg.js":47,"./bm":48,"./bm.js":48,"./bn":49,"./bn.js":49,"./bo":50,"./bo.js":50,"./br":51,"./br.js":51,"./bs":52,"./bs.js":52,"./ca":53,"./ca.js":53,"./cs":54,"./cs.js":54,"./cv":55,"./cv.js":55,"./cy":56,"./cy.js":56,"./da":57,"./da.js":57,"./de":58,"./de-at":59,"./de-at.js":59,"./de-ch":60,"./de-ch.js":60,"./de.js":58,"./dv":61,"./dv.js":61,"./el":62,"./el.js":62,"./en-au":63,"./en-au.js":63,"./en-ca":64,"./en-ca.js":64,"./en-gb":65,"./en-gb.js":65,"./en-ie":66,"./en-ie.js":66,"./en-il":67,"./en-il.js":67,"./en-in":68,"./en-in.js":68,"./en-nz":69,"./en-nz.js":69,"./en-sg":70,"./en-sg.js":70,"./eo":71,"./eo.js":71,"./es":72,"./es-do":73,"./es-do.js":73,"./es-us":74,"./es-us.js":74,"./es.js":72,"./et":75,"./et.js":75,"./eu":76,"./eu.js":76,"./fa":77,"./fa.js":77,"./fi":78,"./fi.js":78,"./fil":79,"./fil.js":79,"./fo":80,"./fo.js":80,"./fr":81,"./fr-ca":82,"./fr-ca.js":82,"./fr-ch":83,"./fr-ch.js":83,"./fr.js":81,"./fy":84,"./fy.js":84,"./ga":85,"./ga.js":85,"./gd":86,"./gd.js":86,"./gl":87,"./gl.js":87,"./gom-deva":88,"./gom-deva.js":88,"./gom-latn":89,"./gom-latn.js":89,"./gu":90,"./gu.js":90,"./he":91,"./he.js":91,"./hi":92,"./hi.js":92,"./hr":93,"./hr.js":93,"./hu":94,"./hu.js":94,"./hy-am":95,"./hy-am.js":95,"./id":96,"./id.js":96,"./is":97,"./is.js":97,"./it":98,"./it-ch":99,"./it-ch.js":99,"./it.js":98,"./ja":100,"./ja.js":100,"./jv":101,"./jv.js":101,"./ka":102,"./ka.js":102,"./kk":103,"./kk.js":103,"./km":104,"./km.js":104,"./kn":105,"./kn.js":105,"./ko":106,"./ko.js":106,"./ku":107,"./ku.js":107,"./ky":108,"./ky.js":108,"./lb":109,"./lb.js":109,"./lo":110,"./lo.js":110,"./lt":111,"./lt.js":111,"./lv":112,"./lv.js":112,"./me":113,"./me.js":113,"./mi":114,"./mi.js":114,"./mk":115,"./mk.js":115,"./ml":116,"./ml.js":116,"./mn":117,"./mn.js":117,"./mr":118,"./mr.js":118,"./ms":119,"./ms-my":120,"./ms-my.js":120,"./ms.js":119,"./mt":121,"./mt.js":121,"./my":122,"./my.js":122,"./nb":123,"./nb.js":123,"./ne":124,"./ne.js":124,"./nl":125,"./nl-be":126,"./nl-be.js":126,"./nl.js":125,"./nn":127,"./nn.js":127,"./oc-lnc":128,"./oc-lnc.js":128,"./pa-in":129,"./pa-in.js":129,"./pl":130,"./pl.js":130,"./pt":131,"./pt-br":132,"./pt-br.js":132,"./pt.js":131,"./ro":133,"./ro.js":133,"./ru":134,"./ru.js":134,"./sd":135,"./sd.js":135,"./se":136,"./se.js":136,"./si":137,"./si.js":137,"./sk":138,"./sk.js":138,"./sl":139,"./sl.js":139,"./sq":140,"./sq.js":140,"./sr":141,"./sr-cyrl":142,"./sr-cyrl.js":142,"./sr.js":141,"./ss":143,"./ss.js":143,"./sv":144,"./sv.js":144,"./sw":145,"./sw.js":145,"./ta":146,"./ta.js":146,"./te":147,"./te.js":147,"./tet":148,"./tet.js":148,"./tg":149,"./tg.js":149,"./th":150,"./th.js":150,"./tk":151,"./tk.js":151,"./tl-ph":152,"./tl-ph.js":152,"./tlh":153,"./tlh.js":153,"./tr":154,"./tr.js":154,"./tzl":155,"./tzl.js":155,"./tzm":156,"./tzm-latn":157,"./tzm-latn.js":157,"./tzm.js":156,"./ug-cn":158,"./ug-cn.js":158,"./uk":159,"./uk.js":159,"./ur":160,"./ur.js":160,"./uz":161,"./uz-latn":162,"./uz-latn.js":162,"./uz.js":161,"./vi":163,"./vi.js":163,"./x-pseudo":164,"./x-pseudo.js":164,"./yo":165,"./yo.js":165,"./zh-cn":166,"./zh-cn.js":166,"./zh-hk":167,"./zh-hk.js":167,"./zh-mo":168,"./zh-mo.js":168,"./zh-tw":169,"./zh-tw.js":169};function n(e){var t=r(e);return a(t)}function r(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=r,e.exports=n,n.id=203},207:function(e,t,a){},208:function(e,t,a){"use strict";a.r(t);var s=a(2),n=a.n(s),r=a(170),o=a(15),c=a(6),l=a(13),i="http://localhost:5000",u=new URL("https://oauth.vk.com/authorize");u.searchParams.append("client_id","secret"),u.searchParams.append("display","page"),u.searchParams.append("redirect_uri","".concat("http://localhost:5000","/callback")),u.searchParams.append("scope","groups"),u.searchParams.append("response_type","code"),u.searchParams.append("v","5.120");var j=u.href,p=a.p+"static/media/icon_vk.svg",m=()=>n.a.createElement("main",{className:"login"},n.a.createElement("a",{href:j},n.a.createElement("span",null,"Login"),n.a.createElement("img",{src:p,alt:"VK icon"}))),d=a(171),h=a.n(d),f=a(12),v=a.n(f),g=a(17),b=a.n(g),y=a(20),k=a.n(y),E=a(18),w=a.n(E),z=new function e(){var t=this;k()(this,e),this.options={headers:{responseType:"application/json"}},this.login=function(){var e=b()(v.a.mark((function e(a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.post("".concat(i,"/api/auth/login"),{code:a},t.options);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",{error:"You are not authorized"});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),this.logout=b()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.post("".concat(i,"/api/auth/logout"),t.options);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",{error:"You are not authorized"});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))},N=new function e(){var t=this;k()(this,e),this.options={headers:{responseType:"application/json"}},this.getGroupsData=b()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("".concat(i,"/api/user/groups"),t.options);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.getUserData=b()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("".concat(i,"/api/user/"),t.options);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))},O=a(209),x={firstName:void 0,lastName:void 0,bDate:void 0,id:void 0},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=Object(O.a)((function(){return{currentUser:e,setData:function(e){t.currentUser=e},removeData:function(){t.currentUser=x},get info(){return t.currentUser}}}));return t},_=a(1),P=a.n(_),U=a(173),M=a(174),L=a.p+"static/media/noattach.png";var S=({post:e})=>{const{text:t,attachments:a,likes:s,views:r,date:o}=e,c=t.replace(/\[|]|(club([0-9]+)[|])/g,"");return n.a.createElement("article",{className:"post"},n.a.createElement("div",{className:"image"},a?(()=>{if("photo"===a[0].type&&a[0].photo){const e=a[0].photo.sizes;return n.a.createElement("img",{src:e[e.length-1].url,alt:"post attachment"})}if("video"===a[0].type&&a[0].video){const e=a[0].video.image;return n.a.createElement("img",{src:e[e.length-1].url,alt:"post attachment"})}})():n.a.createElement("img",{src:L,alt:"no image post"})),n.a.createElement("div",{className:"text"},n.a.createElement("span",null,c.substring(0,350),t.length>350?"...":"")),n.a.createElement("div",{className:"stats"},n.a.createElement("div",{className:"counter"},n.a.createElement("span",{className:"likes"},n.a.createElement(U.a,{color:"red"}),s.count),n.a.createElement("span",{className:"views"},n.a.createElement(M.a,null),r.count)),n.a.createElement("span",{className:"date"},P()(o).locale("ru").format("D MMMM LT"))))};var T=({id:e})=>{const[t,a]=Object(s.useState)(null);return Object(s.useEffect)(()=>{e&&N.getGroupsData().then(e=>{200===e.status&&a(e.data)})},[e]),n.a.createElement("div",null,t?t.length?t.map(e=>n.a.createElement(S,{key:e.id,post:e})):"Постов нет":"Loading...")};const q=Object(l.a)(({currentUser:e,history:t})=>{const a=D();return n.a.createElement("div",{className:"user"},n.a.createElement(o.b,{className:"homepageLink",to:"/"},"Homepage"),n.a.createElement("div",{className:"username"},`${e.firstName} ${e.lastName}`),n.a.createElement("div",{className:"id"},"@"+e.id),n.a.createElement("div",{className:"date"},"Дата рождения: ",e.bDate?e.bDate:"Скрыто"),n.a.createElement("button",{className:"logoutBtn",onClick:e=>{e.preventDefault(),z.logout().then(e=>{200===e.status&&(a.removeData(),t.push("/login"))})}},"Logout"))});var B=Object(c.f)(q);const C=Object(l.a)(({location:e,history:t})=>{const a=D();return Object(s.useEffect)(()=>{var s;const n=null===(s=h.a.parse(e.search))||void 0===s?void 0:s.code;n?z.login(n).then(e=>{if(e.error)t.push("/login");else if(200===e.status){const{bdate:t,last_name:s,first_name:n,id:r}=e.data;a.setData({bDate:t,lastName:s,firstName:n,id:r})}}):N.getUserData().then(e=>{if(200===e.status){const{bdate:t,last_name:s,first_name:n,id:r}=e.data;a.setData({bDate:t,lastName:s,firstName:n,id:r})}else t.push("/login")})},[e]),n.a.createElement(n.a.Fragment,null,n.a.createElement(B,{currentUser:a.info}),n.a.createElement(T,{id:a.info.id}))});var F=Object(c.f)(C);var G=Object(l.a)(()=>n.a.createElement("div",{className:"container"},n.a.createElement(c.c,null,n.a.createElement(c.a,{exact:!0,path:"/login",render:()=>n.a.createElement(m,null)}),n.a.createElement(c.a,{path:"/",render:()=>n.a.createElement(F,null)}))));a(207);Object(r.render)(n.a.createElement(o.a,null,n.a.createElement(G,null)),document.getElementById("app"))}});